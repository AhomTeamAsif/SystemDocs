<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rate Limiting &amp; Quota Management - SystemDocs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Crypto Market Data Aggregator</li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/feature_list.html"><strong aria-hidden="true">2.</strong> Features Overview </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/1-blockchain-data-infrastructure.html"><strong aria-hidden="true">2.1.</strong> BLOCKCHAIN DATA INFRASTRUCTURE</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/2-centralized-exchange-cex-integration.html"><strong aria-hidden="true">2.2.</strong> CENTRALIZED EXCHANGE (CEX) INTEGRATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/3-decentralized-exchange-dex-integration.html"><strong aria-hidden="true">2.3.</strong> DECENTRALIZED EXCHANGE (DEX) INTEGRATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/4-price-aggregation--analytics-engine.html"><strong aria-hidden="true">2.4.</strong> PRICE AGGREGATION & ANALYTICS ENGINE</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/5-time-series-data-generation.html"><strong aria-hidden="true">2.5.</strong> TIME-SERIES DATA GENERATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/6-advanced-analytics-features.html"><strong aria-hidden="true">2.6.</strong> ADVANCED ANALYTICS FEATURES</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/7-user-authentication--authorization.html"><strong aria-hidden="true">2.7.</strong> USER AUTHENTICATION & AUTHORIZATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/8-api-key-management--authentication.html"><strong aria-hidden="true">2.8.</strong> API KEY MANAGEMENT & AUTHENTICATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/9-subscription--billing-management.html"><strong aria-hidden="true">2.9.</strong> SUBSCRIPTION & BILLING MANAGEMENT</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/10-rate-limiting--quota-management.html"><strong aria-hidden="true">2.10.</strong> RATE LIMITING & QUOTA MANAGEMENT</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/11-api--data-distribution.html"><strong aria-hidden="true">2.11.</strong> API & DATA DISTRIBUTION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/12-real-time-data-streaming.html"><strong aria-hidden="true">2.12.</strong> REAL-TIME DATA STREAMING</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/13-compliance--security.html"><strong aria-hidden="true">2.13.</strong> COMPLIANCE & SECURITY</a></li></ol></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/data_definition_sheet.html"><strong aria-hidden="true">3.</strong>  Data Definition Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/1-blockchain-data-infrastructure.html"><strong aria-hidden="true">3.1.</strong> Blockchain Data Infrastructure</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/2-centralized-exchange-cex-integration.html"><strong aria-hidden="true">3.2.</strong> Centralized Exchange (CEX) Integration</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/3-decentralized-exchange-dex-integration.html"><strong aria-hidden="true">3.3.</strong> Decentralized Exchange (DEX) Integration</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/4-price-aggregation--analytics-engine.html"><strong aria-hidden="true">3.4.</strong> Price Aggregation & Analytics Engine</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/5-time-series-data-generation.html"><strong aria-hidden="true">3.5.</strong> Time-Series Data Generation</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/6-advanced-analytics-features.html"><strong aria-hidden="true">3.6.</strong> Advanced Analytics Features</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/7-api-key-management--authentication.html"><strong aria-hidden="true">3.7.</strong> API Key Management & Authentication</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/12-subscription--billing-management.html"><strong aria-hidden="true">3.8.</strong> Subscription & Billing Management</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/8-rate-limiting--quota-management.html" class="active"><strong aria-hidden="true">3.9.</strong> Rate Limiting & Quota Management</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/9-api-data-distribution.html"><strong aria-hidden="true">3.10.</strong> API & Data Distribution</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/10-real-time-data-streamin.html"><strong aria-hidden="true">3.11.</strong> Real-Time Data Streaming</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/11-compliance--security.html"><strong aria-hidden="true">3.12.</strong> Compliance & Security</a></li></ol></li><li class="chapter-item expanded "><a href="../../class_diagram.html"><strong aria-hidden="true">4.</strong> Class Diagram</a></li><li class="chapter-item expanded "><a href="../../er_diagram.html"><strong aria-hidden="true">5.</strong> ER Diagram</a></li><li class="chapter-item expanded "><a href="../../dfd.html"><strong aria-hidden="true">6.</strong> Data Flow Diagram (DFD)</a></li><li class="chapter-item expanded affix "><li class="part-title">RPC Node Provider Service</li><li class="chapter-item expanded "><a href="../../Introduction_rpc.html"><strong aria-hidden="true">7.</strong> RPC Node Provider Service</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SystemDocs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rate-limiting--quota-management"><a class="header" href="#rate-limiting--quota-management">Rate Limiting &amp; Quota Management</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>This document details the data models that support the platform's Rate Limiting &amp; Quota Management features. These structures are designed to store rate limiting configurations, usage quotas, fair usage policies, and dynamic adjustment parameters. The primary purpose of these models is to ensure fair resource allocation, prevent system abuse, maintain optimal performance, and provide predictable service levels across different subscription tiers.</p>
<h2 id="relations-between-tables"><a class="header" href="#relations-between-tables">Relations between Tables</a></h2>
<h3 id="ratelimitconfig--subscriptiontier"><a class="header" href="#ratelimitconfig--subscriptiontier">RateLimitConfig &amp; SubscriptionTier</a></h3>
<ul>
<li><strong>Cardinality</strong>: One-to-Many (1 to *)</li>
<li><strong>Description</strong>: A single SubscriptionTier (e.g., &quot;Professional&quot;) serves as a parent for multiple RateLimitConfig records. This allows for defining granular rules for each tier, such as a global request limit, a more stringent limit for computationally expensive endpoints, and a burst allowance, providing flexible and powerful control over API access.</li>
</ul>
<h3 id="userquota--user"><a class="header" href="#userquota--user">UserQuota &amp; User</a></h3>
<ul>
<li><strong>Cardinality</strong>: One-to-Many (1 to *)</li>
<li><strong>Description</strong>: Tracks a user's consumption against their allowances. Each User has multiple UserQuota records, with each record tracking a specific metric (like API_CALLS) over a specific period (DAILY or MONTHLY). This structure is essential for enforcing the limits defined in the user's subscription tier and for triggering usage-based billing or notifications.</li>
</ul>
<h3 id="ratelimitviolation--user"><a class="header" href="#ratelimitviolation--user">RateLimitViolation &amp; User</a></h3>
<ul>
<li><strong>Cardinality</strong>: One-to-Many (1 to *)</li>
<li><strong>Description</strong>: Every time a user's request is denied due to exceeding a rate limit or quota, a new entry is created in the RateLimitViolation table. This provides a complete historical trail of a user's infraction history, which is critical for abuse detection, automated enforcement escalation, and customer support.</li>
</ul>
<h3 id="fairusagepolicy--subscriptiontier"><a class="header" href="#fairusagepolicy--subscriptiontier">FairUsagePolicy &amp; SubscriptionTier</a></h3>
<ul>
<li><strong>Cardinality</strong>: Many-to-One (* to 1)</li>
<li><strong>Description</strong>: Allows for defining different standards of &quot;fair use.&quot; A policy can be global (where tier_id is null) or linked to a specific SubscriptionTier. This gives the platform the flexibility to enforce stricter behavioral rules on free tiers compared to high-paying enterprise clients.</li>
</ul>
<h3 id="dynamicrateadjustment--ratelimitconfig"><a class="header" href="#dynamicrateadjustment--ratelimitconfig">DynamicRateAdjustment &amp; RateLimitConfig</a></h3>
<ul>
<li><strong>Cardinality</strong>: One-to-Many (1 to *)</li>
<li><strong>Description</strong>: Provides a historical record of system-initiated changes. A single, static RateLimitConfig rule may be temporarily altered due to system load or other real-time conditions. Each such alteration is logged as a DynamicRateAdjustment record, ensuring full transparency into how and why service levels were modified.</li>
</ul>
<h3 id="userwhitelist-user--fairusagepolicy"><a class="header" href="#userwhitelist-user--fairusagepolicy">UserWhitelist, User, &amp; FairUsagePolicy</a></h3>
<ul>
<li><strong>Cardinality</strong>: Many-to-Many (_ to _)</li>
<li><strong>Description</strong>: The UserWhitelist table acts as a bridge, allowing specific, trusted Users to be granted full or partial exemptions from automated restrictions defined in a FairUsagePolicy, accommodating legitimate high-volume use cases.</li>
</ul>
<h2 id="data-models"><a class="header" href="#data-models">Data Models</a></h2>
<h3 id="ratelimitconfig"><a class="header" href="#ratelimitconfig">RateLimitConfig</a></h3>
<p>Defines rate limiting rules for different subscription tiers and endpoints, supporting feature RL-001.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>config_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the rate limit configuration.</td></tr>
<tr><td>tier_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the SubscriptionTier table.</td></tr>
<tr><td>endpoint_pattern</td><td>String</td><td>No</td><td>e.g., &quot;/api/v1/prices/*&quot;</td><td>Specific endpoint or pattern (null for global limits).</td></tr>
<tr><td>limit_type</td><td>Enum</td><td>Yes</td><td>PER_MINUTE, PER_HOUR, PER_DAY</td><td>Time window for the rate limit.</td></tr>
<tr><td>request_limit</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>Maximum requests allowed in the time window.</td></tr>
<tr><td>burst_limit</td><td>Integer</td><td>No</td><td>Positive integer</td><td>Additional requests allowed for short bursts.</td></tr>
<tr><td>burst_window_seconds</td><td>Integer</td><td>No</td><td>Seconds</td><td>Time window for burst allowance.</td></tr>
<tr><td>priority</td><td>Integer</td><td>Yes</td><td>1-100</td><td>Priority when multiple configs apply (higher = more specific).</td></tr>
<tr><td>is_active</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether this configuration is currently active.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this configuration was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this configuration was last modified.</td></tr>
</tbody></table>
</div>
<h3 id="userquota"><a class="header" href="#userquota">UserQuota</a></h3>
<p>Tracks individual user quota allocations and current usage for multiple metric types, supporting feature RL-002.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key to the User table. Part of composite primary key.</td></tr>
<tr><td>quota_type</td><td>Enum</td><td>Yes</td><td>API_CALLS, DATA_POINTS, HISTORICAL_REQUESTS</td><td>Type of quota being tracked. Part of composite key.</td></tr>
<tr><td>period_type</td><td>Enum</td><td>Yes</td><td>DAILY, MONTHLY</td><td>Quota reset period. Part of composite key.</td></tr>
<tr><td>allocated_quota</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>Total quota allocated for the period, based on the user's tier.</td></tr>
<tr><td>used_quota</td><td>Integer</td><td>Yes</td><td>Non-negative integer</td><td>Amount of quota currently used in the period.</td></tr>
<tr><td>reset_date</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When the quota will next reset.</td></tr>
<tr><td>last_usage_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>Timestamp of the last quota usage.</td></tr>
<tr><td>warning_threshold</td><td>Float</td><td>Yes</td><td>0.0 - 1.0</td><td>Percentage threshold for usage warnings (e.g., 0.8 for 80%).</td></tr>
<tr><td>warning_sent</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether a warning notification has been sent for this period.</td></tr>
<tr><td>overage_allowed</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether overage beyond the quota is permitted (often tied to billing).</td></tr>
<tr><td>overage_limit</td><td>Integer</td><td>No</td><td>Positive integer</td><td>Maximum overage allowed (if overage_allowed is true).</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this quota record was last updated.</td></tr>
</tbody></table>
</div>
<h3 id="ratelimitviolation"><a class="header" href="#ratelimitviolation">RateLimitViolation</a></h3>
<p>Time-series table logging rate limit violations and enforcement actions, supporting feature RL-003.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>violation_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the violation record.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the User table.</td></tr>
<tr><td>timestamp</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When the violation occurred.</td></tr>
<tr><td>endpoint</td><td>String</td><td>Yes</td><td>e.g., &quot;/api/v1/prices&quot;</td><td>The endpoint where the violation occurred.</td></tr>
<tr><td>violation_type</td><td>Enum</td><td>Yes</td><td>RATE_LIMIT, QUOTA_EXCEEDED, FAIR_USAGE</td><td>The type of rule that was violated.</td></tr>
<tr><td>limit_exceeded</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>The defined limit that was exceeded.</td></tr>
<tr><td>actual_usage</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>The actual usage that triggered the violation.</td></tr>
<tr><td>enforcement_action</td><td>Enum</td><td>Yes</td><td>WARNING, THROTTLE, BLOCK, SUSPEND</td><td>Action taken by the system in response.</td></tr>
<tr><td>duration_seconds</td><td>Integer</td><td>No</td><td>Seconds</td><td>Duration of the enforcement action (if applicable).</td></tr>
<tr><td>severity</td><td>Enum</td><td>Yes</td><td>LOW, MEDIUM, HIGH, CRITICAL</td><td>Severity level of the violation, used for escalations.</td></tr>
<tr><td>user_agent</td><td>String</td><td>No</td><td>Free text</td><td>User agent string from the offending request.</td></tr>
<tr><td>ip_address</td><td>String</td><td>No</td><td>IP address</td><td>Client IP address of the offending request.</td></tr>
<tr><td>metadata</td><td>JSON</td><td>No</td><td>JSON object</td><td>Additional context about the violation for analysis.</td></tr>
</tbody></table>
</div>
<h3 id="fairusagepolicy"><a class="header" href="#fairusagepolicy">FairUsagePolicy</a></h3>
<p>Defines fair usage rules and automated enforcement thresholds, supporting feature RL-003.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>policy_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the fair usage policy.</td></tr>
<tr><td>policy_name</td><td>String</td><td>Yes</td><td>Free text</td><td>Human-readable name for the policy (e.g., &quot;Free Tier Anti-Scraping Policy&quot;).</td></tr>
<tr><td>tier_id</td><td>UUID</td><td>No</td><td>UUID</td><td>Foreign key to SubscriptionTier (null for global policies).</td></tr>
<tr><td>detection_window_hours</td><td>Integer</td><td>Yes</td><td>Hours</td><td>Time window for detecting anomalous behavior patterns.</td></tr>
<tr><td>threshold_multiplier</td><td>Float</td><td>Yes</td><td>&gt; 1.0</td><td>Multiplier of a user's normal usage baseline that triggers a violation.</td></tr>
<tr><td>violation_count_threshold</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>Number of violations within the window before escalating action.</td></tr>
<tr><td>escalation_sequence</td><td>JSON</td><td>Yes</td><td>JSON array</td><td>A defined sequence of enforcement actions (e.g., [&quot;WARN&quot;, &quot;THROTTLE_1H&quot;, &quot;BLOCK_24H&quot;]).</td></tr>
<tr><td>whitelist_enabled</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether whitelisting is available for this policy.</td></tr>
<tr><td>appeal_process_enabled</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether users are allowed to appeal actions under this policy.</td></tr>
<tr><td>auto_review_hours</td><td>Integer</td><td>No</td><td>Hours</td><td>Hours before an automated review of a violation is triggered.</td></tr>
<tr><td>is_active</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether this policy is currently being enforced.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this policy was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this policy was last modified.</td></tr>
</tbody></table>
</div>
<h3 id="dynamicrateadjustment"><a class="header" href="#dynamicrateadjustment">DynamicRateAdjustment</a></h3>
<p>Time-series table storing dynamic rate limit adjustments based on system conditions, supporting feature RL-004.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>adjustment_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the adjustment record.</td></tr>
<tr><td>config_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the specific RateLimitConfig that was adjusted.</td></tr>
<tr><td>timestamp</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When the adjustment was made.</td></tr>
<tr><td>trigger_type</td><td>Enum</td><td>Yes</td><td>SYSTEM_LOAD, USER_BEHAVIOR, PREDICTIVE, MANUAL</td><td>The reason for the adjustment.</td></tr>
<tr><td>original_limit</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>The original rate limit value before adjustment.</td></tr>
<tr><td>adjusted_limit</td><td>Integer</td><td>Yes</td><td>Positive integer</td><td>The new, temporarily adjusted rate limit value.</td></tr>
<tr><td>adjustment_factor</td><td>Float</td><td>Yes</td><td>&gt; 0.0</td><td>Multiplier applied to the original limit to get the adjusted limit.</td></tr>
<tr><td>system_load_pct</td><td>Float</td><td>No</td><td>0.0 - 1.0</td><td>System-wide load percentage at the time of adjustment.</td></tr>
<tr><td>cpu_usage_pct</td><td>Float</td><td>No</td><td>0.0 - 1.0</td><td>CPU usage percentage of the relevant service.</td></tr>
<tr><td>memory_usage_pct</td><td>Float</td><td>No</td><td>0.0 - 1.0</td><td>Memory usage percentage of the relevant service.</td></tr>
<tr><td>active_connections</td><td>Integer</td><td>No</td><td>Non-negative integer</td><td>Number of active connections to the service.</td></tr>
<tr><td>prediction_confidence</td><td>Float</td><td>No</td><td>0.0 - 1.0</td><td>Confidence level for predictive adjustments.</td></tr>
<tr><td>duration_minutes</td><td>Integer</td><td>No</td><td>Minutes</td><td>Expected duration of the adjustment.</td></tr>
<tr><td>auto_revert</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether the adjustment is configured to automatically revert.</td></tr>
<tr><td>revert_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>The specific time the adjustment is scheduled to revert.</td></tr>
<tr><td>created_by</td><td>String</td><td>No</td><td>Free text</td><td>Identifier for the user or system that created the adjustment.</td></tr>
<tr><td>metadata</td><td>JSON</td><td>No</td><td>JSON object</td><td>Additional context about the adjustment for analysis.</td></tr>
</tbody></table>
</div>
<h3 id="userwhitelist"><a class="header" href="#userwhitelist">UserWhitelist</a></h3>
<p>Manages whitelisted users who are exempt from certain fair usage policies, supporting feature RL-003.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>whitelist_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the whitelist entry.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the User table.</td></tr>
<tr><td>policy_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the FairUsagePolicy from which the user is exempt.</td></tr>
<tr><td>exemption_type</td><td>Enum</td><td>Yes</td><td>PARTIAL, FULL</td><td>The level of exemption from the policy.</td></tr>
<tr><td>custom_limits</td><td>JSON</td><td>No</td><td>JSON object</td><td>Custom limits or rules that apply instead of the policy's defaults (for PARTIAL exemption).</td></tr>
<tr><td>reason</td><td>Text</td><td>Yes</td><td>Free text</td><td>Justification for why the user is being whitelisted.</td></tr>
<tr><td>approved_by</td><td>String</td><td>Yes</td><td>Free text</td><td>The admin or system that approved the whitelist entry.</td></tr>
<tr><td>valid_from</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When the whitelist entry becomes active.</td></tr>
<tr><td>valid_until</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When the whitelist entry expires (null for permanent).</td></tr>
<tr><td>review_date</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>A future date when this entry should be manually reviewed.</td></tr>
<tr><td>is_active</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether this whitelist entry is currently active and enforced.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this entry was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this entry was last modified.</td></tr>
</tbody></table>
</div>
<h2 id="relationships"><a class="header" href="#relationships">Relationships</a></h2>
<ul>
<li><strong>SubscriptionTier [tier_id (PK)] 1 =&gt; * RateLimitConfig [tier_id (FK)]</strong></li>
<li><strong>User [user_id (PK)] 1 =&gt; * UserQuota [user_id (FK)]</strong></li>
<li><strong>User [user_id (PK)] 1 =&gt; * RateLimitViolation [user_id (FK)]</strong></li>
<li><strong>SubscriptionTier [tier_id (PK)] 1 =&gt; * FairUsagePolicy [tier_id (FK)]</strong></li>
<li><strong>RateLimitConfig [config_id (PK)] 1 =&gt; * DynamicRateAdjustment [config_id (FK)]</strong></li>
<li><strong>User [user_id (PK)] 1 =&gt; * UserWhitelist [user_id (FK)]</strong></li>
<li><strong>FairUsagePolicy [policy_id (PK)] 1 =&gt; * UserWhitelist [policy_id (FK)]</strong></li>
</ul>
<h2 id="entities--relationships"><a class="header" href="#entities--relationships">Entities &amp; Relationships</a></h2>
<ul>
<li><strong>RateLimitConfig</strong>
<ul>
<li>config_id (PK)</li>
<li>tier_id (FK → SubscriptionTier.tier_id)</li>
</ul>
</li>
<li><strong>UserQuota</strong>
<ul>
<li>user_id (PK, FK → User.user_id)</li>
<li>quota_type (PK)</li>
<li>period_type (PK)</li>
</ul>
</li>
<li><strong>RateLimitViolation</strong>
<ul>
<li>violation_id (PK)</li>
<li>user_id (FK → User.user_id)</li>
</ul>
</li>
<li><strong>FairUsagePolicy</strong>
<ul>
<li>policy_id (PK)</li>
<li>tier_id (FK → SubscriptionTier.tier_id)</li>
</ul>
</li>
<li><strong>DynamicRateAdjustment</strong>
<ul>
<li>adjustment_id (PK)</li>
<li>config_id (FK → RateLimitConfig.config_id)</li>
</ul>
</li>
<li><strong>UserWhitelist</strong>
<ul>
<li>whitelist_id (PK)</li>
<li>user_id (FK → User.user_id)</li>
<li>policy_id (FK → FairUsagePolicy.policy_id)</li>
</ul>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Crypto_Market_Data/Data_Defination_Sheet/12-subscription--billing-management.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../Crypto_Market_Data/Data_Defination_Sheet/9-api-data-distribution.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Crypto_Market_Data/Data_Defination_Sheet/12-subscription--billing-management.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../Crypto_Market_Data/Data_Defination_Sheet/9-api-data-distribution.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
