<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Compliance &amp; Security - SystemDocs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Crypto Market Data Aggregator</li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/feature_list.html"><strong aria-hidden="true">2.</strong> Features Overview </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/1-blockchain-data-infrastructure.html"><strong aria-hidden="true">2.1.</strong> BLOCKCHAIN DATA INFRASTRUCTURE</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/2-centralized-exchange-cex-integration.html"><strong aria-hidden="true">2.2.</strong> CENTRALIZED EXCHANGE (CEX) INTEGRATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/3-decentralized-exchange-dex-integration.html"><strong aria-hidden="true">2.3.</strong> DECENTRALIZED EXCHANGE (DEX) INTEGRATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/4-price-aggregation--analytics-engine.html"><strong aria-hidden="true">2.4.</strong> PRICE AGGREGATION & ANALYTICS ENGINE</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/5-time-series-data-generation.html"><strong aria-hidden="true">2.5.</strong> TIME-SERIES DATA GENERATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/6-advanced-analytics-features.html"><strong aria-hidden="true">2.6.</strong> ADVANCED ANALYTICS FEATURES</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/7-user-authentication--authorization.html"><strong aria-hidden="true">2.7.</strong> USER AUTHENTICATION & AUTHORIZATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/8-api-key-management--authentication.html"><strong aria-hidden="true">2.8.</strong> API KEY MANAGEMENT & AUTHENTICATION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/9-subscription--billing-management.html"><strong aria-hidden="true">2.9.</strong> SUBSCRIPTION & BILLING MANAGEMENT</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/10-rate-limiting--quota-management.html"><strong aria-hidden="true">2.10.</strong> RATE LIMITING & QUOTA MANAGEMENT</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/11-api--data-distribution.html"><strong aria-hidden="true">2.11.</strong> API & DATA DISTRIBUTION</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/12-real-time-data-streaming.html"><strong aria-hidden="true">2.12.</strong> REAL-TIME DATA STREAMING</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Feature_List/13-compliance--security.html"><strong aria-hidden="true">2.13.</strong> COMPLIANCE & SECURITY</a></li></ol></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/data_definition_sheet.html"><strong aria-hidden="true">3.</strong>  Data Definition Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/1-blockchain-data-infrastructure.html"><strong aria-hidden="true">3.1.</strong> Blockchain Data Infrastructure</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/2-centralized-exchange-cex-integration.html"><strong aria-hidden="true">3.2.</strong> Centralized Exchange (CEX) Integration</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/3-decentralized-exchange-dex-integration.html"><strong aria-hidden="true">3.3.</strong> Decentralized Exchange (DEX) Integration</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/4-price-aggregation--analytics-engine.html"><strong aria-hidden="true">3.4.</strong> Price Aggregation & Analytics Engine</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/5-time-series-data-generation.html"><strong aria-hidden="true">3.5.</strong> Time-Series Data Generation</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/6-advanced-analytics-features.html"><strong aria-hidden="true">3.6.</strong> Advanced Analytics Features</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/7-api-key-management--authentication.html"><strong aria-hidden="true">3.7.</strong> API Key Management & Authentication</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/12-subscription--billing-management.html"><strong aria-hidden="true">3.8.</strong> Subscription & Billing Management</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/8-rate-limiting--quota-management.html"><strong aria-hidden="true">3.9.</strong> Rate Limiting & Quota Management</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/9-api-data-distribution.html"><strong aria-hidden="true">3.10.</strong> API & Data Distribution</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/10-real-time-data-streamin.html"><strong aria-hidden="true">3.11.</strong> Real-Time Data Streaming</a></li><li class="chapter-item expanded "><a href="../../Crypto_Market_Data/Data_Defination_Sheet/11-compliance--security.html" class="active"><strong aria-hidden="true">3.12.</strong> Compliance & Security</a></li></ol></li><li class="chapter-item expanded "><a href="../../class_diagram.html"><strong aria-hidden="true">4.</strong> Class Diagram</a></li><li class="chapter-item expanded "><a href="../../er_diagram.html"><strong aria-hidden="true">5.</strong> ER Diagram</a></li><li class="chapter-item expanded "><a href="../../dfd.html"><strong aria-hidden="true">6.</strong> Data Flow Diagram (DFD)</a></li><li class="chapter-item expanded affix "><li class="part-title">RPC Node Provider Service</li><li class="chapter-item expanded "><a href="../../Introduction_rpc.html"><strong aria-hidden="true">7.</strong> RPC Node Provider Service</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SystemDocs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="compliance--security"><a class="header" href="#compliance--security">Compliance &amp; Security</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>This document details the data models that support the platform's Compliance &amp; Security features. These structures are designed to manage data privacy compliance, user consent tracking, security threat detection, and incident response. The primary purpose of these models is to ensure regulatory compliance (GDPR, CCPA, etc.), protect user privacy rights, maintain comprehensive security monitoring, and provide robust protection against malicious attacks and data breaches.</p>
<h2 id="relations-between-tables"><a class="header" href="#relations-between-tables">Relations between Tables</a></h2>
<ul>
<li><strong>UserConsent &amp; User</strong>: The UserConsent table has a many-to-one relationship with the User table. Each user can have multiple consent records over time (e.g., granting, then withdrawing consent), but each individual consent record must belong to exactly one user. This is tracked via the UserConsent.user_id foreign key and is foundational for privacy compliance.</li>
<li><strong>DataExportRequest &amp; User</strong>: This is a many-to-one relationship where multiple data export requests can be initiated by a single user. Each request in the DataExportRequest table is firmly linked back to one User via the user_id foreign key, ensuring proper handling of data portability rights under GDPR Article 20.</li>
<li><strong>DataDeletionRequest &amp; User</strong>: Similar to export requests, this is a many-to-one relationship. A user can submit multiple &quot;right to be forgotten&quot; requests, and each record in the DataDeletionRequest table is associated with exactly one user. This facilitates tracking and fulfillment of deletion requests per GDPR Article 17.</li>
<li><strong>SecurityIncident &amp; User / IPReputationScore</strong>: The SecurityIncident table has two key relationships. It has an optional many-to-one relationship with User (user_id can be null for system-wide incidents). It also has a many-to-one relationship with IPReputationScore via the source_ip field. This means many incidents can be traced back to a single malicious IP address, allowing for aggregated threat analysis.</li>
<li><strong>IPReputationScore</strong>: This table acts as a central hub for threat intelligence. It does not have outgoing foreign keys but is referenced by other tables. Its primary key, ip_address, links to SecurityIncident and SecurityAuditLog records, allowing events to be enriched with reputation and risk data.</li>
<li><strong>SecurityAuditLog &amp; User</strong>: This table has a many-to-one relationship with User. A single user's activity can generate a large volume of audit log entries. The user_id is nullable because some system-level security events may not be attributable to a specific user.</li>
<li><strong>PrivacyPolicyVersion &amp; UserConsent</strong>: A one-to-many relationship exists where one record in PrivacyPolicyVersion can be associated with many UserConsent records. The UserConsent.consent_version field links to the specific policy version the user agreed to, creating an immutable, auditable record of acceptance.</li>
</ul>
<h2 id="userconsent"><a class="header" href="#userconsent">UserConsent</a></h2>
<p>Manages user consent for various data processing activities, supporting feature CS-001.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>consent_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the consent record.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the User table.</td></tr>
<tr><td>consent_type</td><td>Enum</td><td>Yes</td><td>DATA_PROCESSING, MARKETING, ANALYTICS, COOKIES</td><td>Type of consent being tracked.</td></tr>
<tr><td>purpose_description</td><td>Text</td><td>Yes</td><td>FreeAd text</td><td>Detailed description of data processing purpose.</td></tr>
<tr><td>consent_status</td><td>Enum</td><td>Yes</td><td>GRANTED, DENIED, WITHDRAWN, EXPIRED</td><td>Current consent status.</td></tr>
<tr><td>consent_method</td><td>Enum</td><td>Yes</td><td>EXPLICIT_OPT_IN, IMPLIED, PRE_CHECKED, GRANULAR</td><td>How consent was obtained.</td></tr>
<tr><td>consent_version</td><td>String</td><td>Yes</td><td>e.g., &quot;v2.1&quot;</td><td>Version of privacy policy/terms when consent was given.</td></tr>
<tr><td>legal_basis</td><td>Enum</td><td>Yes</td><td>CONSENT, CONTRACT, LEGAL_OBLIGATION, VITAL_INTERESTS, PUBLIC_TASK, LEGITIMATE_INTERESTS</td><td>GDPR legal basis for processing.</td></tr>
<tr><td>data_categories</td><td>JSON</td><td>Yes</td><td>JSON array</td><td>Categories of personal data covered by this consent.</td></tr>
<tr><td>processing_purposes</td><td>JSON</td><td>Yes</td><td>JSON array</td><td>Specific purposes for data processing.</td></tr>
<tr><td>third_party_sharing</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether data may be shared with third parties.</td></tr>
<tr><td>retention_period_days</td><td>Integer</td><td>No</td><td>Positive integer</td><td>Data retention period in days (null for indefinite).</td></tr>
<tr><td>granted_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When consent was granted.</td></tr>
<tr><td>withdrawn_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When consent was withdrawn.</td></tr>
<tr><td>expires_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When consent expires (null for indefinite).</td></tr>
<tr><td>ip_address</td><td>String</td><td>No</td><td>IP address</td><td>IP address when consent was given.</td></tr>
<tr><td>user_agent</td><td>String</td><td>No</td><td>Free text</td><td>Browser/client when consent was given.</td></tr>
<tr><td>evidence_data</td><td>JSON</td><td>No</td><td>JSON object</td><td>Additional evidence of consent (e.g., form data, timestamps).</td></tr>
<tr><td>withdrawal_reason</td><td>Text</td><td>No</td><td>Free text</td><td>Reason for consent withdrawal.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When consent record was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When consent record was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="dataexportrequest"><a class="header" href="#dataexportrequest">DataExportRequest</a></h2>
<p>Tracks user requests for data portability and export (GDPR Article 20), supporting feature CS-001.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>request_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the export request.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the User table.</td></tr>
<tr><td>request_type</td><td>Enum</td><td>Yes</td><td>FULL_EXPORT, PARTIAL_EXPORT, SPECIFIC_DATA</td><td>Scope of data export requested.</td></tr>
<tr><td>data_categories</td><td>JSON</td><td>Yes</td><td>JSON array</td><td>Specific categories of data requested.</td></tr>
<tr><td>export_format</td><td>Enum</td><td>Yes</td><td>JSON, CSV, XML, PDF</td><td>Requested format for exported data.</td></tr>
<tr><td>status</td><td>Enum</td><td>Yes</td><td>PENDING, PROCESSING, COMPLETED, FAILED, CANCELLED</td><td>Current request status.</td></tr>
<tr><td>requested_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When request was submitted.</td></tr>
<tr><td>processed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When processing began.</td></tr>
<tr><td>completed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When request was completed.</td></tr>
<tr><td>expires_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When download link expires.</td></tr>
<tr><td>file_path</td><td>String</td><td>No</td><td>File path</td><td>Location of generated export file.</td></tr>
<tr><td>file_size_bytes</td><td>BigInt</td><td>No</td><td>Bytes</td><td>Size of exported data file.</td></tr>
<tr><td>download_count</td><td>Integer</td><td>Yes</td><td>Non-negative integer</td><td>Number of times file was downloaded.</td></tr>
<tr><td>last_downloaded_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When file was last downloaded.</td></tr>
<tr><td>verification_token</td><td>String</td><td>No</td><td>Token</td><td>Security token for download verification.</td></tr>
<tr><td>delivery_method</td><td>Enum</td><td>Yes</td><td>DOWNLOAD_LINK, EMAIL, SECURE_PORTAL</td><td>How export is delivered to user.</td></tr>
<tr><td>delivery_address</td><td>String</td><td>No</td><td>Email/URL</td><td>Delivery destination.</td></tr>
<tr><td>processing_notes</td><td>Text</td><td>No</td><td>Free text</td><td>Notes about processing or issues encountered.</td></tr>
<tr><td>failure_reason</td><td>Text</td><td>No</td><td>Free text</td><td>Reason for failure (if status is FAILED).</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When request was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When request was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="datadeletionrequest"><a class="header" href="#datadeletionrequest">DataDeletionRequest</a></h2>
<p>Manages &quot;right to be forgotten&quot; requests and tracks deletion progress (GDPR Article 17), supporting feature CS-001.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>deletion_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the deletion request.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Foreign key linking to the User table.</td></tr>
<tr><td>deletion_scope</td><td>Enum</td><td>Yes</td><td>COMPLETE_DELETION, PARTIAL_DELETION, ANONYMIZATION</td><td>Scope of deletion requested.</td></tr>
<tr><td>data_categories</td><td>JSON</td><td>No</td><td>JSON array</td><td>Specific data categories to delete (for partial deletion).</td></tr>
<tr><td>legal_ground</td><td>Enum</td><td>Yes</td><td>CONSENT_WITHDRAWN, UNLAWFUL_PROCESSING, NO_LONGER_NECESSARY, OBJECTION</td><td>Legal ground for deletion.</td></tr>
<tr><td>status</td><td>Enum</td><td>Yes</td><td>PENDING, UNDER_REVIEW, APPROVED, REJECTED, PROCESSING, COMPLETED</td><td>Current request status.</td></tr>
<tr><td>requested_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When deletion was requested.</td></tr>
<tr><td>reviewed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When request was reviewed.</td></tr>
<tr><td>approved_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When deletion was approved.</td></tr>
<tr><td>processing_started_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When deletion processing began.</td></tr>
<tr><td>completed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When deletion was completed.</td></tr>
<tr><td>reviewer_id</td><td>String</td><td>No</td><td>User ID</td><td>Who reviewed the request.</td></tr>
<tr><td>rejection_reason</td><td>Text</td><td>No</td><td>Free text</td><td>Reason for rejection (if applicable).</td></tr>
<tr><td>retention_override</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether legal retention requirements override deletion.</td></tr>
<tr><td>retention_reason</td><td>Text</td><td>No</td><td>Free text</td><td>Reason for retention override.</td></tr>
<tr><td>backup_deletion_status</td><td>Enum</td><td>Yes</td><td>PENDING, IN_PROGRESS, COMPLETED, NOT_APPLICABLE</td><td>Status of backup deletion.</td></tr>
<tr><td>third_party_notification</td><td>JSON</td><td>No</td><td>JSON object</td><td>Status of third-party deletion notifications.</td></tr>
<tr><td>verification_required</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether additional identity verification is required.</td></tr>
<tr><td>verification_completed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When identity verification was completed.</td></tr>
<tr><td>processing_log</td><td>JSON</td><td>No</td><td>JSON array</td><td>Log of deletion processing steps.</td></tr>
<tr><td>data_subjects_notified</td><td>JSON</td><td>No</td><td>JSON array</td><td>List of data subjects/contacts notified.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When deletion request was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When request was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="securityincident"><a class="header" href="#securityincident">SecurityIncident</a></h2>
<p>Logs security threats, attacks, and incidents for monitoring and response, supporting feature CS-002.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>incident_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the security incident.</td></tr>
<tr><td>incident_type</td><td>Enum</td><td>Yes</td><td>DDOS_ATTACK, BRUTE_FORCE, SQL_INJECTION, XSS_ATTEMPT, RATE_LIMIT_VIOLATION, SUSPICIOUS_BEHAVIOR</td><td>Type of security incident.</td></tr>
<tr><td>severity_level</td><td>Enum</td><td>Yes</td><td>LOW, MEDIUM, HIGH, CRITICAL</td><td>Severity level of the incident.</td></tr>
<tr><td>status</td><td>Enum</td><td>Yes</td><td>DETECTED, INVESTIGATING, MITIGATED, RESOLVED, FALSE_POSITIVE</td><td>Current incident status.</td></tr>
<tr><td>source_ip</td><td>String</td><td>Yes</td><td>IP address</td><td>Source IP address of the incident.</td></tr>
<tr><td>target_endpoint</td><td>String</td><td>No</td><td>URL/endpoint</td><td>API endpoint or resource targeted.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>No</td><td>UUID</td><td>Associated user (if applicable).</td></tr>
<tr><td>attack_vector</td><td>Enum</td><td>No</td><td>HTTP_FLOOD, SYN_FLOOD, SLOWLORIS, APPLICATION_LAYER, VOLUMETRIC</td><td>Type of attack vector used.</td></tr>
<tr><td>request_count</td><td>Integer</td><td>No</td><td>Positive integer</td><td>Number of malicious requests detected.</td></tr>
<tr><td>blocked_requests</td><td>Integer</td><td>No</td><td>Non-negative integer</td><td>Number of requests blocked.</td></tr>
<tr><td>detection_method</td><td>Enum</td><td>Yes</td><td>RATE_LIMITING, PATTERN_MATCHING, ML_ANOMALY, REPUTATION_FILTER, MANUAL</td><td>How incident was detected.</td></tr>
<tr><td>detection_confidence</td><td>Float</td><td>No</td><td>0.0 - 1.0</td><td>Confidence level of detection (for ML-based detection).</td></tr>
<tr><td>first_detected_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When incident was first detected.</td></tr>
<tr><td>last_activity_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When last malicious activity was observed.</td></tr>
<tr><td>duration_seconds</td><td>Integer</td><td>No</td><td>Seconds</td><td>Duration of the incident.</td></tr>
<tr><td>mitigation_actions</td><td>JSON</td><td>No</td><td>JSON array</td><td>Actions taken to mitigate the incident.</td></tr>
<tr><td>impact_assessment</td><td>Text</td><td>No</td><td>Free text</td><td>Assessment of incident impact.</td></tr>
<tr><td>root_cause</td><td>Text</td><td>No</td><td>Free text</td><td>Identified root cause of the incident.</td></tr>
<tr><td>lessons_learned</td><td>Text</td><td>No</td><td>Free text</td><td>Lessons learned and preventive measures.</td></tr>
<tr><td>assigned_to</td><td>String</td><td>No</td><td>User ID</td><td>Security team member assigned.</td></tr>
<tr><td>escalated</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether incident was escalated.</td></tr>
<tr><td>escalated_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When incident was escalated.</td></tr>
<tr><td>resolved_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When incident was resolved.</td></tr>
<tr><td>false_positive</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether incident was determined to be false positive.</td></tr>
<tr><td>threat_intelligence</td><td>JSON</td><td>No</td><td>JSON object</td><td>Related threat intelligence data.</td></tr>
<tr><td>forensic_data</td><td>JSON</td><td>No</td><td>JSON object</td><td>Forensic evidence and analysis.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When incident record was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When incident record was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="ipreputationscore"><a class="header" href="#ipreputationscore">IPReputationScore</a></h2>
<p>Maintains IP address reputation data for threat detection and blocking, supporting feature CS-002.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>ip_address</td><td>String</td><td>Yes</td><td>IP address</td><td>IP address being tracked. Primary key.</td></tr>
<tr><td>reputation_score</td><td>Integer</td><td>Yes</td><td>0 - 100</td><td>Overall reputation score (0 = malicious, 100 = trusted).</td></tr>
<tr><td>risk_level</td><td>Enum</td><td>Yes</td><td>TRUSTED, LOW_RISK, MEDIUM_RISK, HIGH_RISK, MALICIOUS</td><td>Categorical risk assessment.</td></tr>
<tr><td>threat_categories</td><td>JSON</td><td>No</td><td>JSON array</td><td>Categories of threats associated with this IP.</td></tr>
<tr><td>first_seen_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When IP was first observed.</td></tr>
<tr><td>last_seen_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When IP was last observed.</td></tr>
<tr><td>request_count</td><td>BigInt</td><td>Yes</td><td>Non-negative integer</td><td>Total requests from this IP.</td></tr>
<tr><td>blocked_count</td><td>BigInt</td><td>Yes</td><td>Non-negative integer</td><td>Total blocked requests from this IP.</td></tr>
<tr><td>incident_count</td><td>Integer</td><td>Yes</td><td>Non-negative integer</td><td>Number of security incidents from this IP.</td></tr>
<tr><td>last_incident_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When last security incident occurred.</td></tr>
<tr><td>geolocation</td><td>JSON</td><td>No</td><td>JSON object</td><td>Geographic location data.</td></tr>
<tr><td>asn_info</td><td>JSON</td><td>No</td><td>JSON object</td><td>Autonomous System Number information.</td></tr>
<tr><td>is_vpn</td><td>Boolean</td><td>No</td><td>true/false/null</td><td>Whether IP is identified as VPN/proxy.</td></tr>
<tr><td>is_tor</td><td>Boolean</td><td>No</td><td>true/false/null</td><td>Whether IP is identified as Tor exit node.</td></tr>
<tr><td>is_datacenter</td><td>Boolean</td><td>No</td><td>true/false/null</td><td>Whether IP belongs to datacenter/hosting provider.</td></tr>
<tr><td>whitelist_status</td><td>Enum</td><td>Yes</td><td>NOT_LISTED, WHITELISTED, TEMPORARILY_WHITELISTED</td><td>Whitelist status.</td></tr>
<tr><td>blacklist_status</td><td>Enum</td><td>Yes</td><td>NOT_LISTED, BLACKLISTED, TEMPORARILY_BLACKLISTED</td><td>Blacklist status.</td></tr>
<tr><td>auto_block_until</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When automatic blocking expires.</td></tr>
<tr><td>external_reputation</td><td>JSON</td><td>No</td><td>JSON object</td><td>Reputation data from external threat intelligence.</td></tr>
<tr><td>notes</td><td>Text</td><td>No</td><td>Free text</td><td>Manual notes about this IP.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When reputation record was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When reputation was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="securityauditlog"><a class="header" href="#securityauditlog">SecurityAuditLog</a></h2>
<p>Time-series table logging all security-relevant events for compliance and forensic analysis, supporting features CS-001 and CS-002.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>log_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the audit log entry.</td></tr>
<tr><td>timestamp</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When the event occurred.</td></tr>
<tr><td>event_type</td><td>Enum</td><td>Yes</td><td>LOGIN, LOGOUT, API_ACCESS, DATA_EXPORT, CONSENT_CHANGE, SECURITY_INCIDENT, ADMIN_ACTION</td><td>Type of security event.</td></tr>
<tr><td>user_id</td><td>UUID</td><td>No</td><td>UUID</td><td>User associated with the event (if applicable).</td></tr>
<tr><td>session_id</td><td>String</td><td>No</td><td>Session ID</td><td>Session identifier.</td></tr>
<tr><td>ip_address</td><td>String</td><td>Yes</td><td>IP address</td><td>Source IP address.</td></tr>
<tr><td>user_agent</td><td>String</td><td>No</td><td>Free text</td><td>Client user agent.</td></tr>
<tr><td>endpoint</td><td>String</td><td>No</td><td>URL/endpoint</td><td>API endpoint or resource accessed.</td></tr>
<tr><td>http_method</td><td>String</td><td>No</td><td>HTTP method</td><td>HTTP method used (GET, POST, etc.).</td></tr>
<tr><td>response_code</td><td>Integer</td><td>No</td><td>HTTP status code</td><td>HTTP response code.</td></tr>
<tr><td>request_size_bytes</td><td>Integer</td><td>No</td><td>Bytes</td><td>Size of request payload.</td></tr>
<tr><td>response_size_bytes</td><td>Integer</td><td>No</td><td>Bytes</td><td>Size of response payload.</td></tr>
<tr><td>processing_time_ms</td><td>Integer</td><td>No</td><td>Milliseconds</td><td>Time taken to process request.</td></tr>
<tr><td>event_result</td><td>Enum</td><td>Yes</td><td>SUCCESS, FAILURE, BLOCKED, SUSPICIOUS</td><td>Result of the event.</td></tr>
<tr><td>risk_score</td><td>Integer</td><td>No</td><td>0 - 100</td><td>Calculated risk score for the event.</td></tr>
<tr><td>threat_indicators</td><td>JSON</td><td>No</td><td>JSON array</td><td>Security threat indicators detected.</td></tr>
<tr><td>geolocation</td><td>JSON</td><td>No</td><td>JSON object</td><td>Geographic location of request.</td></tr>
<tr><td>device_fingerprint</td><td>String</td><td>No</td><td>Hash</td><td>Device fingerprint hash.</td></tr>
<tr><td>referrer</td><td>String</td><td>No</td><td>URL</td><td>HTTP referrer header.</td></tr>
<tr><td>additional_headers</td><td>JSON</td><td>No</td><td>JSON object</td><td>Relevant HTTP headers.</td></tr>
<tr><td>payload_hash</td><td>String</td><td>No</td><td>Hash</td><td>Hash of request payload (for integrity).</td></tr>
<tr><td>compliance_flags</td><td>JSON</td><td>No</td><td>JSON array</td><td>Compliance-related flags (GDPR, etc.).</td></tr>
<tr><td>retention_category</td><td>Enum</td><td>Yes</td><td>SECURITY, COMPLIANCE, OPERATIONAL, FORENSIC</td><td>Data retention category.</td></tr>
<tr><td>anonymized</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether personally identifiable data has been anonymized.</td></tr>
<tr><td>metadata</td><td>JSON</td><td>No</td><td>JSON object</td><td>Additional event metadata.</td></tr>
</tbody></table>
</div>
<h2 id="privacypolicyversion"><a class="header" href="#privacypolicyversion">PrivacyPolicyVersion</a></h2>
<p>Tracks privacy policy versions and user acceptance, supporting feature CS-001.</p>
<div class="table-wrapper"><table><thead><tr><th>Field Name</th><th>Type</th><th>Required?</th><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td>version_id</td><td>UUID</td><td>Yes</td><td>UUID</td><td>Primary key for the privacy policy version.</td></tr>
<tr><td>version_number</td><td>String</td><td>Yes</td><td>e.g., &quot;v3.2&quot;</td><td>Human-readable version number.</td></tr>
<tr><td>effective_date</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When this version becomes effective.</td></tr>
<tr><td>expiry_date</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When this version expires (null for current).</td></tr>
<tr><td>policy_content</td><td>Text</td><td>Yes</td><td>Free text</td><td>Full text of the privacy policy.</td></tr>
<tr><td>content_hash</td><td>String</td><td>Yes</td><td>SHA-256 hash</td><td>Hash of policy content for integrity.</td></tr>
<tr><td>major_changes</td><td>JSON</td><td>No</td><td>JSON array</td><td>Summary of major changes from previous version.</td></tr>
<tr><td>legal_review_status</td><td>Enum</td><td>Yes</td><td>DRAFT, UNDER_REVIEW, APPROVED, PUBLISHED</td><td>Legal review status.</td></tr>
<tr><td>reviewed_by</td><td>String</td><td>No</td><td>User ID</td><td>Legal reviewer.</td></tr>
<tr><td>reviewed_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When legal review was completed.</td></tr>
<tr><td>published_at</td><td>Timestamp</td><td>No</td><td>ISO 8601</td><td>When version was published.</td></tr>
<tr><td>acceptance_required</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether users must explicitly accept this version.</td></tr>
<tr><td>notification_sent</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether users were notified of changes.</td></tr>
<tr><td>is_current</td><td>Boolean</td><td>Yes</td><td>true/false</td><td>Whether this is the current active version.</td></tr>
<tr><td>created_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When version was created.</td></tr>
<tr><td>updated_at</td><td>Timestamp</td><td>Yes</td><td>ISO 8601</td><td>When version was last updated.</td></tr>
</tbody></table>
</div>
<h2 id="relationships"><a class="header" href="#relationships">Relationships</a></h2>
<ul>
<li><strong>User</strong> [user_id (PK)] 1 =&gt; * <strong>UserConsent</strong> [user_id (FK)]</li>
<li><strong>User</strong> [user_id (PK)] 1 =&gt; * <strong>DataExportRequest</strong> [user_id (FK)]</li>
<li><strong>User</strong> [user_id (PK)] 1 =&gt; * <strong>DataDeletionRequest</strong> [user_id (FK)]</li>
<li><strong>User</strong> [user_id (PK)] 1 =&gt; 0...* <strong>SecurityIncident</strong> [user_id (FK, Nullable)]</li>
<li><strong>User</strong> [user_id (PK)] 1 =&gt; 0...* <strong>SecurityAuditLog</strong> [user_id (FK, Nullable)]</li>
<li><strong>IPReputationScore</strong> [ip_address (PK)] 1 =&gt; * <strong>SecurityIncident</strong> [source_ip (FK)]</li>
<li><strong>IPReputationScore</strong> [ip_address (PK)] 1 =&gt; * <strong>SecurityAuditLog</strong> [ip_address (FK)]</li>
<li><strong>PrivacyPolicyVersion</strong> [version_number (Unique Key)] 1 =&gt; * <strong>UserConsent</strong> [consent_version (FK)]</li>
</ul>
<h2 id="entities--relationships"><a class="header" href="#entities--relationships">Entities &amp; Relationships</a></h2>
<h3 id="userconsent-1"><a class="header" href="#userconsent-1">UserConsent</a></h3>
<ul>
<li><strong>consent_id</strong> (PK)</li>
<li><strong>user_id</strong> (FK → User.user_id): Links consent to the specific user who provided it.</li>
<li><strong>consent_version</strong> (FK → PrivacyPolicyVersion.version_number): Links to the exact policy version that was accepted.</li>
</ul>
<h3 id="dataexportrequest-1"><a class="header" href="#dataexportrequest-1">DataExportRequest</a></h3>
<ul>
<li><strong>request_id</strong> (PK)</li>
<li><strong>user_id</strong> (FK → User.user_id): Links the export request to the user who made it.</li>
</ul>
<h3 id="datadeletionrequest-1"><a class="header" href="#datadeletionrequest-1">DataDeletionRequest</a></h3>
<ul>
<li><strong>deletion_id</strong> (PK)</li>
<li><strong>user_id</strong> (FK → User.user_id): Links the deletion request to the user who made it.</li>
</ul>
<h3 id="securityincident-1"><a class="header" href="#securityincident-1">SecurityIncident</a></h3>
<ul>
<li><strong>incident_id</strong> (PK)</li>
<li><strong>user_id</strong> (FK → User.user_id): Optionally links the incident to an affected user account.</li>
<li><strong>source_ip</strong> (FK → IPReputationScore.ip_address): Links the incident to the reputation record of the source IP.</li>
</ul>
<h3 id="ipreputationscore-1"><a class="header" href="#ipreputationscore-1">IPReputationScore</a></h3>
<ul>
<li><strong>ip_address</strong> (PK): The unique IP address. Referenced by SecurityIncident and SecurityAuditLog.</li>
</ul>
<h3 id="securityauditlog-1"><a class="header" href="#securityauditlog-1">SecurityAuditLog</a></h3>
<ul>
<li><strong>log_id</strong> (PK)</li>
<li><strong>user_id</strong> (FK → User.user_id): Optionally links the logged event to the user who performed the action.</li>
<li><strong>ip_address</strong> (FK → IPReputationScore.ip_address): Links the log to the reputation record of the source IP.</li>
</ul>
<h3 id="privacypolicyversion-1"><a class="header" href="#privacypolicyversion-1">PrivacyPolicyVersion</a></h3>
<ul>
<li><strong>version_id</strong> (PK)</li>
<li><strong>version_number</strong> (Unique Key): The business key referenced by UserConsent.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Crypto_Market_Data/Data_Defination_Sheet/10-real-time-data-streamin.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../class_diagram.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Crypto_Market_Data/Data_Defination_Sheet/10-real-time-data-streamin.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../class_diagram.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
